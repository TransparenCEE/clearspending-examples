Примеры работы с API  
======================
на сайте clearspending.ru

Пример Example_mashape
----
Рассмотрим пример, который реализован в файле contract_example. Этот пример позволяет получать данные с сервиса [clearspending]. Для обращении создаётся list, в котором находятся URL-адреса для обращения к API, с учётом разных ценовых диапазонов. После получения списка контрактов, можно получить ИНН и КПП, необходимые для нахождения заказчиков.

Более сложная логика реализована в примере с использованием flask.

Пример example_mashape_flask
----
Графическое представление в браузере будет доступно после установки всех компонентов из requirements.txt.
```
pip install -r requirements.txt
```
Для старта сервера, запустите flask_clearspending/run.py
```
cd flask_clearspending
python run.py
```
 
Если вы хотите работать только с API, то Вам понадобится библиотека Unirest. Пример реализован в файле example_mashape_flask/app/views.py в функции placing_json. Он анализирует количество финансовых средств, которые были реализованы в течение заданного года. Производится анализ типа размещения контракта. Рассмотрим запрос к серверу, который позволяет это сделать:
```
'customerregion=71&daterange=01.01.2011-31.12.2011&returnfields=[price,signDate,foundation]&page=1'

1 является первой страницей, 0-ая страница недоступна.
```
Все поля можно найти в документации, которые передаются в GET параметре. Unirest возвращает dict, с которым легко работать в python.

'Total' в зависимости от запроса позволяет узнать количество найденых записей и осуществить постраничный просмотр. В ходе работы был сформирован dict, в корне которого находится поле "год", на следующем уровне, соответственно, коллекция типов размещения контракта, в которых находится связь между месяцем и бюджетом в рублях. Адрес для запроса 'localhost:5000/dict/placing/'

Пример ответа в формате json:
```
{
  "2011": {
    "1": {
      "4": 200000.0, 
      "5": 105846.96
    }, 
    "3": {
      "3": 109779.0, 
      "4": 214008.8, 
      "5": 413000.0, 
      "6": 624300.4, 
      ...
    }, 
    "4": {
      "2": 522729.48, 
      "3": 2420830.9800000004, 
      "4": 3267761.9099999997, 
      ...
    }, 
    "5": {
      "6": 105868.85
    }, 
    "price_year": 34446807.260000005
  }
}
```
Для более наглядного представления данных была реализована визуализация через [google chart]. Используйте адрес [для примера]
[google chart]:https://developers.google.com/chart/
[clearspending]:http://clearspending.ru
[для примера]:http://localhost:5000/placing/